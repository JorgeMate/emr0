(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["search_p"],{

/***/ "./assets/css/search_p.scss":
/*!**********************************!*\
  !*** ./assets/css/search_p.scss ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./assets/js/components/search_p.js":
/*!******************************************!*\
  !*** ./assets/js/components/search_p.js ***!
  \******************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(__webpack_provided_window_dot_jQuery) {/* harmony import */ var core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.symbol */ "./node_modules/core-js/modules/es.symbol.js");
/* harmony import */ var core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.symbol.description */ "./node_modules/core-js/modules/es.symbol.description.js");
/* harmony import */ var core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_es_symbol_iterator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.symbol.iterator */ "./node_modules/core-js/modules/es.symbol.iterator.js");
/* harmony import */ var core_js_modules_es_symbol_iterator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.array.iterator */ "./node_modules/core-js/modules/es.array.iterator.js");
/* harmony import */ var core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.object.to-string */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.regexp.exec */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.string.iterator */ "./node_modules/core-js/modules/es.string.iterator.js");
/* harmony import */ var core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.string.replace */ "./node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.string.search */ "./node_modules/core-js/modules/es.string.search.js");
/* harmony import */ var core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var core_js_modules_es_string_trim__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.string.trim */ "./node_modules/core-js/modules/es.string.trim.js");
/* harmony import */ var core_js_modules_es_string_trim__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_trim__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator */ "./node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var core_js_modules_web_timers__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/web.timers */ "./node_modules/core-js/modules/web.timers.js");
/* harmony import */ var core_js_modules_web_timers__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_timers__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _css_search_p_scss__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../css/search_p.scss */ "./assets/css/search_p.scss");
/* harmony import */ var _css_search_p_scss__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_css_search_p_scss__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_13__);













function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }



/**
 * jQuery plugin for an instant searching.
 *
 * @author Oleg Voronkovich <oleg-voronkovich@yandex.ru>
 * @author Yonel Ceruto <yonelceruto@gmail.com>
 */

(function instantSearch($) {
  'use strict';

  String.prototype.render = function (parameters) {
    return this.replace(/({{ (\w+) }})/g, function (match, pattern, name) {
      return parameters[name];
    });
  }; // INSTANTS SEARCH PUBLIC CLASS DEFINITION
  // =======================================


  var InstantSearch = function InstantSearch(element, options) {
    this.$input = $(element);
    this.$form = this.$input.closest('form');
    this.$preview = $('<ul class="search-preview list-group">').appendTo(this.$form);
    this.options = $.extend({}, InstantSearch.DEFAULTS, this.$input.data(), options);
    this.$input.keyup(this.debounce());
  };

  InstantSearch.DEFAULTS = {
    minQueryLength: 2,
    limit: 10,
    delay: 500,
    noResultsMessage: 'No results found',
    itemTemplate: '\
        <article class="patient">\
        <p class="patient-metadata">\
          <a href="{{ url }}">{{ firstname }} {{ lastname }}</a> &nbsp; {{ sex }} ({{ age }})\
         <br>{{ birthdate }} - Rec. N. {{ id }}\
        </p>\
        </article>'
  };

  InstantSearch.prototype.debounce = function () {
    var delay = this.options.delay;
    var search = this.search;
    var timer = null;
    var self = this;
    return function () {
      clearTimeout(timer);
      timer = setTimeout(function () {
        search.apply(self);
      }, delay);
    };
  };

  InstantSearch.prototype.search = function () {
    var query = $.trim(this.$input.val()).replace(/\s{2,}/g, ' ');

    if (query.length < this.options.minQueryLength) {
      this.$preview.empty();
      return;
    }

    var self = this;
    var data = this.$form.serializeArray();
    data['l'] = this.limit;
    $.getJSON(this.$form.attr('action'), data, function (items) {
      self.show(items);
    });
  };

  InstantSearch.prototype.show = function (items) {
    var $preview = this.$preview;
    var itemTemplate = this.options.itemTemplate;

    if (0 === items.length) {
      $preview.html(this.options.noResultsMessage);
    } else {
      $preview.empty();
      $.each(items, function (index, item) {
        $preview.append(itemTemplate.render(item));
      });
    }
  }; // INSTANTS SEARCH PLUGIN DEFINITION
  // =================================


  function Plugin(option) {
    return this.each(function () {
      var $this = $(this);
      var instance = $this.data('instantSearch');
      var options = _typeof(option) === 'object' && option;
      if (!instance) $this.data('instantSearch', instance = new InstantSearch(this, options));
      if (option === 'search') instance.search();
    });
  }

  $.fn.instantSearch = Plugin;
  $.fn.instantSearch.Constructor = InstantSearch;
})(__webpack_provided_window_dot_jQuery); // import './jquery.instantSearch.js';


jquery__WEBPACK_IMPORTED_MODULE_13___default()(function () {
  jquery__WEBPACK_IMPORTED_MODULE_13___default()('.js-search-field').instantSearch({
    delay: 100
  });
});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ })

},[["./assets/js/components/search_p.js","runtime","vendors~app~delete~dp_en~dp_es~dp_fr~dp_nl~med_stop~search_p~sel_treat","vendors~app~med_stop~search_p","vendors~search_p"]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvY3NzL3NlYXJjaF9wLnNjc3MiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL2NvbXBvbmVudHMvc2VhcmNoX3AuanMiXSwibmFtZXMiOlsiaW5zdGFudFNlYXJjaCIsIiQiLCJTdHJpbmciLCJwcm90b3R5cGUiLCJyZW5kZXIiLCJwYXJhbWV0ZXJzIiwicmVwbGFjZSIsIm1hdGNoIiwicGF0dGVybiIsIm5hbWUiLCJJbnN0YW50U2VhcmNoIiwiZWxlbWVudCIsIm9wdGlvbnMiLCIkaW5wdXQiLCIkZm9ybSIsImNsb3Nlc3QiLCIkcHJldmlldyIsImFwcGVuZFRvIiwiZXh0ZW5kIiwiREVGQVVMVFMiLCJkYXRhIiwia2V5dXAiLCJkZWJvdW5jZSIsIm1pblF1ZXJ5TGVuZ3RoIiwibGltaXQiLCJkZWxheSIsIm5vUmVzdWx0c01lc3NhZ2UiLCJpdGVtVGVtcGxhdGUiLCJzZWFyY2giLCJ0aW1lciIsInNlbGYiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiYXBwbHkiLCJxdWVyeSIsInRyaW0iLCJ2YWwiLCJsZW5ndGgiLCJlbXB0eSIsInNlcmlhbGl6ZUFycmF5IiwiZ2V0SlNPTiIsImF0dHIiLCJpdGVtcyIsInNob3ciLCJodG1sIiwiZWFjaCIsImluZGV4IiwiaXRlbSIsImFwcGVuZCIsIlBsdWdpbiIsIm9wdGlvbiIsIiR0aGlzIiwiaW5zdGFuY2UiLCJmbiIsIkNvbnN0cnVjdG9yIiwid2luZG93Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSx1Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNBQTtBQUNBO0FBR0E7Ozs7Ozs7QUFNQSxDQUFDLFNBQVNBLGFBQVQsQ0FBdUJDLENBQXZCLEVBQTBCO0FBQ3ZCOztBQUVBQyxRQUFNLENBQUNDLFNBQVAsQ0FBaUJDLE1BQWpCLEdBQTBCLFVBQVVDLFVBQVYsRUFBc0I7QUFDNUMsV0FBTyxLQUFLQyxPQUFM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dEIsQ0FBb0M7QUFDaEN5QixTQUFLLEVBQUU7QUFEeUIsR0FBcEM7QUFHSCxDQUpBLENBQUQsQyIsImZpbGUiOiJzZWFyY2hfcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpbiIsImltcG9ydCAnLi4vLi4vY3NzL3NlYXJjaF9wLnNjc3MnO1xuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuXG4vKipcbiAqIGpRdWVyeSBwbHVnaW4gZm9yIGFuIGluc3RhbnQgc2VhcmNoaW5nLlxuICpcbiAqIEBhdXRob3IgT2xlZyBWb3JvbmtvdmljaCA8b2xlZy12b3JvbmtvdmljaEB5YW5kZXgucnU+XG4gKiBAYXV0aG9yIFlvbmVsIENlcnV0byA8eW9uZWxjZXJ1dG9AZ21haWwuY29tPlxuICovXG4oZnVuY3Rpb24gaW5zdGFudFNlYXJjaCgkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgU3RyaW5nLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAocGFyYW1ldGVycykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC8oe3sgKFxcdyspIH19KS9nLCBmdW5jdGlvbiAobWF0Y2gsIHBhdHRlcm4sIG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJhbWV0ZXJzW25hbWVdO1xuICAgICAgICB9KVxuICAgIH07XG5cbiAgICAvLyBJTlNUQU5UUyBTRUFSQ0ggUFVCTElDIENMQVNTIERFRklOSVRJT05cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIHZhciBJbnN0YW50U2VhcmNoID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy4kaW5wdXQgPSAkKGVsZW1lbnQpO1xuICAgICAgICB0aGlzLiRmb3JtID0gdGhpcy4kaW5wdXQuY2xvc2VzdCgnZm9ybScpO1xuICAgICAgICB0aGlzLiRwcmV2aWV3ID0gJCgnPHVsIGNsYXNzPVwic2VhcmNoLXByZXZpZXcgbGlzdC1ncm91cFwiPicpLmFwcGVuZFRvKHRoaXMuJGZvcm0pO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgSW5zdGFudFNlYXJjaC5ERUZBVUxUUywgdGhpcy4kaW5wdXQuZGF0YSgpLCBvcHRpb25zKTtcblxuICAgICAgICB0aGlzLiRpbnB1dC5rZXl1cCh0aGlzLmRlYm91bmNlKCkpO1xuICAgIH07XG5cbiAgICBJbnN0YW50U2VhcmNoLkRFRkFVTFRTID0ge1xuICAgICAgICBtaW5RdWVyeUxlbmd0aDogMixcbiAgICAgICAgbGltaXQ6IDEwLFxuICAgICAgICBkZWxheTogNTAwLFxuICAgICAgICBub1Jlc3VsdHNNZXNzYWdlOiAnTm8gcmVzdWx0cyBmb3VuZCcsXG4gICAgICAgIGl0ZW1UZW1wbGF0ZTogJ1xcXG4gICAgICAgIDxhcnRpY2xlIGNsYXNzPVwicGF0aWVudFwiPlxcXG4gICAgICAgIDxwIGNsYXNzPVwicGF0aWVudC1tZXRhZGF0YVwiPlxcXG4gICAgICAgICAgPGEgaHJlZj1cInt7IHVybCB9fVwiPnt7IGZpcnN0bmFtZSB9fSB7eyBsYXN0bmFtZSB9fTwvYT4gJm5ic3A7IHt7IHNleCB9fSAoe3sgYWdlIH19KVxcXG4gICAgICAgICA8YnI+e3sgYmlydGhkYXRlIH19IC0gUmVjLiBOLiB7eyBpZCB9fVxcXG4gICAgICAgIDwvcD5cXFxuICAgICAgICA8L2FydGljbGU+J1xufTtcblxuICAgIEluc3RhbnRTZWFyY2gucHJvdG90eXBlLmRlYm91bmNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGVsYXkgPSB0aGlzLm9wdGlvbnMuZGVsYXk7XG4gICAgICAgIHZhciBzZWFyY2ggPSB0aGlzLnNlYXJjaDtcbiAgICAgICAgdmFyIHRpbWVyID0gbnVsbDtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZWFyY2guYXBwbHkoc2VsZik7XG4gICAgICAgICAgICB9LCBkZWxheSk7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIEluc3RhbnRTZWFyY2gucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHF1ZXJ5ID0gJC50cmltKHRoaXMuJGlucHV0LnZhbCgpKS5yZXBsYWNlKC9cXHN7Mix9L2csICcgJyk7XG4gICAgICAgIGlmIChxdWVyeS5sZW5ndGggPCB0aGlzLm9wdGlvbnMubWluUXVlcnlMZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuJHByZXZpZXcuZW1wdHkoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLiRmb3JtLnNlcmlhbGl6ZUFycmF5KCk7XG4gICAgICAgIGRhdGFbJ2wnXSA9IHRoaXMubGltaXQ7XG5cbiAgICAgICAgJC5nZXRKU09OKHRoaXMuJGZvcm0uYXR0cignYWN0aW9uJyksIGRhdGEsIGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICAgICAgc2VsZi5zaG93KGl0ZW1zKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIEluc3RhbnRTZWFyY2gucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgdmFyICRwcmV2aWV3ID0gdGhpcy4kcHJldmlldztcbiAgICAgICAgdmFyIGl0ZW1UZW1wbGF0ZSA9IHRoaXMub3B0aW9ucy5pdGVtVGVtcGxhdGU7XG5cbiAgICAgICAgaWYgKDAgPT09IGl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgJHByZXZpZXcuaHRtbCh0aGlzLm9wdGlvbnMubm9SZXN1bHRzTWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkcHJldmlldy5lbXB0eSgpO1xuICAgICAgICAgICAgJC5lYWNoKGl0ZW1zLCBmdW5jdGlvbiAoaW5kZXgsIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAkcHJldmlldy5hcHBlbmQoaXRlbVRlbXBsYXRlLnJlbmRlcihpdGVtKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBJTlNUQU5UUyBTRUFSQ0ggUExVR0lOIERFRklOSVRJT05cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIGZ1bmN0aW9uIFBsdWdpbihvcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gJHRoaXMuZGF0YSgnaW5zdGFudFNlYXJjaCcpO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9uID09PSAnb2JqZWN0JyAmJiBvcHRpb247XG5cbiAgICAgICAgICAgIGlmICghaW5zdGFuY2UpICR0aGlzLmRhdGEoJ2luc3RhbnRTZWFyY2gnLCAoaW5zdGFuY2UgPSBuZXcgSW5zdGFudFNlYXJjaCh0aGlzLCBvcHRpb25zKSkpO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9uID09PSAnc2VhcmNoJykgaW5zdGFuY2Uuc2VhcmNoKCk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgJC5mbi5pbnN0YW50U2VhcmNoID0gUGx1Z2luO1xuICAgICQuZm4uaW5zdGFudFNlYXJjaC5Db25zdHJ1Y3RvciA9IEluc3RhbnRTZWFyY2g7XG5cbn0pKHdpbmRvdy5qUXVlcnkpO1xuXG5cbi8vIGltcG9ydCAnLi9qcXVlcnkuaW5zdGFudFNlYXJjaC5qcyc7XG5cbiQoZnVuY3Rpb24oKSB7XG4gICAgJCgnLmpzLXNlYXJjaC1maWVsZCcpLmluc3RhbnRTZWFyY2goe1xuICAgICAgICBkZWxheTogMTAwLFxuICAgIH0pO1xufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9